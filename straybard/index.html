<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>If you're not OBS, Go Away</title>
  <script src="https://cdn.jsdelivr.net/npm/comfy.js@latest/dist/comfy.min.js"></script>
  <style>
  
    .image {
        width: 1920px;
        height: 1080px;
        display: none;
        background-color: #ccc;
        margin: 0;
        position: absolute;
        top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
        opacity: 0.0;
    }

  </style>
</head>

<body>

<h1 id="error"> </h1>
<button id="butt" onclick="removeButton()" >Click to start</button>

<script>

    var key = "";

    function removeButton() {
        key = document.location.has.split("&")[0].split("=")[1];
        error.innerHTML = key;
        setUp();
    }

    var random = 0;

    function setUp() {
        // Connect to the channel to read channel point redemptions
        try {
            ComfyJS.Init( "tjwombo", key);

            error.innerHTML = "connected";

            document.getElementById("key").remove();
            document.getElementById("butt").remove();

            ComfyJS.onReward = ( user, reward, cost, message, extra ) => {
                // Play a random fnaf jumpscare
                if (reward == "Jumpscare") {

                    // Get a random time between 0 delay and 45 seconds
                    var wait = Math.floor(Math.random()*45000);

                    // Wait for that amount of time
                    setTimeout(function(){
                
                        // Get a random jumpscare
                        //var random = Math.floor(Math.random()* numOfJumpscares);


                        // Testing through each one
                        random++;
                        if (random == 19) {
                            random = 0;
                        }

                        // Play a different video for a different time based off of the number we got
                        switch(random) {
                            default:
                                setTimeout(function(){
                                    console.log("a");
                                }, 1420);
                                break;
                        }

                    }, wait);
            
                }
            }
        } catch (err) {
            error.innerHTML = "failed connection: " + err;
        }
    }
</script>
</body>
</html>

