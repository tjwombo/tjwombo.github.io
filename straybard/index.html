<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>If you're not OBS, Go Away</title>
  <script src="https://cdn.jsdelivr.net/npm/comfy.js@latest/dist/comfy.min.js"></script>
  <style>
  
    .image {
        width: 1920px;
        height: 1080px;
        display: none;
        background-color: #ccc;
        margin: 0;
        position: absolute;
        top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
        opacity: 0.0;
    }

  </style>
</head>

<body>

<h1 id="error"> </h1>
<input type="text" id="key">
<button id="butt" class="shownButton" onclick="removeButton()" >Click to submit</button>

<script>

    function removeButton() {
        console.log("it worked");
        document.cookie = "key=" + document.getElementById("key").value + "; expires=Thu, 01 Jan 2080 00:00:00 UTC";
        document.getElementById("key").remove();
        document.getElementById("butt").remove();
        error.innerHTML = document.cookie;
    }

    // Variables that we are adjusting through cookies
    var key = "";


    // Read the cookie and put the value into the variables and update the page
    if (document.cookie != null) {
        for (i = 0; i < document.cookie.split('; ').length; i++) {
            if (document.cookie.split('; ')[i].includes("key")) {
                key = document.cookie.split('; ')[i].substring(document.cookie.split('; ')[i].indexOf("=")+1);
                document.getElementById("key").remove();
                document.getElementById("butt").remove();
                error.innerHTML = key;
                break;
            }
        }
        // In case there is only one cookie
        error.innerHTML = "test " + document.cookie;
        if (document.cookie.startsWith("key") && key == "") {
            key = document.cookie.substring(4);
            document.getElementById("key").remove();
            document.getElementById("butt").remove();
            error.innerHTML = key;
        }
    }

    // Connect to the channel to read channel point redemptions
    ComfyJS.Init( "tjwombo", key);
 
    var random = 0;

    ComfyJS.onReward = ( user, reward, cost, message, extra ) => {
        // Play a random fnaf jumpscare
        if (reward == "Jumpscare") {

            // Get a random time between 0 delay and 45 seconds
            var wait = Math.floor(Math.random()*45000);

            // Wait for that amount of time
            setTimeout(function(){
                
                // Get a random jumpscare
                //var random = Math.floor(Math.random()* numOfJumpscares);


                // Testing through each one
                random++;
                if (random == 19) {
                    random = 0;
                }

                // Play a different video for a different time based off of the number we got
                switch(random) {
                    default:
                        setTimeout(function(){
				console.log("a");
                        }, 1420);
                        break;
                }

            }, wait);
            
        }
    }

  </script>
</body>
</html>

